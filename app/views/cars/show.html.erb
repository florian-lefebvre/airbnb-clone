<div class="container mt-5">
  <%= link_to "Back to list", cars_path, class: "btn btn-secondary btn-sm" %>
  <div class="d-flex justify-content-between align-items-center">
    <h1 class="my-3"><%= @car.model %></h1>
    <div class="">
      <% if policy(@car).edit? %>
        <%= link_to "Edit details", edit_car_path(@car), class: "btn btn-primary btn-sm" %>
      <% end %>
      <% if policy(@car).destroy? %>
        <%= link_to "Delete", car_path(@car), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class: "btn btn-danger btn-sm" %>
      <% end %>
    </div>
  </div>
  <div class="row mb-5 g-3">
    <div class="col-md-6 col-lg-8">
      <%= image_tag @car.photo.url, alt: @car.model, class: "w-100 rounded-4" %>
      <h1>New booking</h1>
      <%= simple_form_for [@car, @booking] do |f| %>
        <%= f.input :start_date %>
        <%= f.input :end_date %>
        <%= f.submit "Submit booking", class: "btn btn-primary" %>
      <% end %>
    </div>
    <div class="col-md-6 col-lg-4">
      <% attributes = {
        year: @car.year,
        price: @car.price,
        user: @car.user.full_name,
        kilometers: @car.kilometers,
        model: @car.model,
        seats: @car.seats,
        color: @car.color,
        car_type: @car.car_type
      } %>
      <div class="accordion" id="car-properties">
        <% attributes.each do |k, v| %>
          <% heading_id = "car-attributes-heading-#{k}" %>
          <% collapse_id = "car-attributes-collapse-#{k}" %>
          <div class="accordion-item">
            <h2 class="accordion-header" id="<%= heading_id %>">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#<%= collapse_id %>" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                <%= k.to_s.humanize %>
              </button>
            </h2>
            <div id="<%= collapse_id %>" class="accordion-collapse collapse show" aria-labelledby="<%= heading_id %>">
              <div class="accordion-body">
                <%= v %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
